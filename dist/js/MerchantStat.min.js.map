{"version":3,"sources":["MerchantStat.js"],"names":["define","$","Backbone","template","echarts","hi","app","tplSax","PieView","Marionette","ItemView","extend","initialize","reRender","this","render","events","click .tab-panel","changeTab","e","target","hasClass","location","href","onShow","allMerchantsChart","init","document","getElementById","newMerchantsChart","option","tooltip","trigger","formatter","legend","orient","left","data","series","name","type","radius","center","value","itemStyle","emphasis","shadowBlur","shadowOffsetX","shadowColor","setOption","NavView","click .state","changeState","event","each","removeClass","addClass","TableView","listenTo","collection","lineChart","showLoading","StatsLayout","LayoutView","tagName","id","regions","header","body","footer","pieView","navView","tableView","showChildView"],"mappings":"AAAAA,QAAQ,SAAU,WAAY,oCAAqC,gCAAiC,gDAChG,SAAUC,EAAGC,EAAUC,EAAUC,GAC7BC,GAAGC,IAAIC,OAAOJ,EAEd,IAAIK,GAAUC,WAAWC,SAASC,QAC9BR,SAAU,wBACVS,WAAY,aAEZC,SAAU,WACNC,KAAKC,UAETC,QACIC,mBAAoB,aAExBC,UAAW,SAAUC,GACjB,GAAIC,GAASD,EAAEC,MACVnB,GAAEmB,GAAQC,SAAS,aACpBC,SAASC,KAAO,0BAGxBC,OAAQ,WACJ,GAAIC,GAAoBrB,EAAQsB,KAAKC,SAASC,eAAe,8BACzDC,EAAoBzB,EAAQsB,KAAKC,SAASC,eAAe,6BAC7DE,SACIC,SACIC,QAAS,OACTC,UAAW,6BAEfC,QACIC,OAAQ,WACRC,KAAM,QACNC,MAAO,OAAQ,OAAQ,SAE3BC,SAEQC,KAAM,OACNC,KAAM,MACNC,OAAQ,MACRC,QAAS,MAAO,OAChBL,OACKM,MAAO,GAAIJ,KAAM,SACjBI,MAAO,EAAGJ,KAAM,SAChBI,MAAO,GAAIJ,KAAM,SAEtBK,WACIC,UACIC,WAAY,GACZC,cAAe,EACfC,YAAa,0BAuCjCvB,EAAkBwB,UAAUnB,QAC5BD,EAAkBoB,UAAUnB,WAKhCoB,EAAUzC,WAAWC,SAASC,QAC9BR,SAAU,mBACVS,WAAY,aAGZC,SAAU,aAGVG,QACImC,eAAgB,eAEpBC,YAAa,SAAUC,GACnB,GAAIjC,GAASiC,EAAMjC,MACdnB,GAAEmB,GAAQC,SAAS,cACpBpB,EAAEA,EAAE,WAAWqD,KAAK,WAChBrD,EAAEa,MAAMyC,YAAY,sBAExBtD,EAAEmB,GAAQoC,SAAS,qBAEvB1C,KAAKD,cAIT4C,EAAYhD,WAAWC,SAASC,QAChCR,SAAU,0BACVS,WAAY,WACRE,KAAK4C,SAAS5C,KAAK6C,WAAY,SAAU7C,KAAKD,WAElDA,SAAU,WACNC,KAAKC,UAETS,OAAQ,WACJ,GAAIoC,GAAYxD,EAAQsB,KAAKC,SAASC,eAAe,sBACrDgC,GAAUC,iBAGdC,EAAcrD,WAAWsD,WAAWpD,QACpCqD,QAAS,MACTC,GAAI,wBACJ9D,SAAU,oBACV+D,SACIC,OAAQ,oBACRC,KAAM,oBACNC,OAAQ,yBAEZ7C,OAAQ,WACJ,GAAI8C,GAAU,GAAI9D,GACd+D,EAAU,GAAIrB,GACdsB,EAAY,GAAIf,EACpB3C,MAAK2D,cAAc,SAAUH,GAC7BxD,KAAK2D,cAAc,OAAOF,GAC1BzD,KAAK2D,cAAc,SAASD,KAGpC,OAAOV","file":"MerchantStat.min.js","sourcesContent":["define(['jquery', 'backbone', 'text!tpl/reportForms/merchantStat', 'ms/reportForms/js/echarts.min', 'css!ms/reportForms/css/merchantStat-list.css'],\r\n    function ($, Backbone, template, echarts) {\r\n        hi.app.tplSax(template);\r\n        /****************pieView*******************/\r\n        var PieView = Marionette.ItemView.extend({\r\n            template: \"merchantStat-pie-list\",\r\n            initialize: function () {\r\n            },\r\n            reRender: function () {\r\n                this.render();\r\n            },\r\n            events: {\r\n                \"click .tab-panel\": \"changeTab\"\r\n            },\r\n            changeTab: function (e) {\r\n                var target = e.target;\r\n                if (!$(target).hasClass(\"choosed\")) {\r\n                    location.href = \"#reportForms/userList\";\r\n                }\r\n            },\r\n            onShow: function () {\r\n                var allMerchantsChart = echarts.init(document.getElementById('all-yogaMerchants-echarts'));\r\n                var newMerchantsChart = echarts.init(document.getElementById('new-yogaMerchants-echarts'));\r\n                option = {\r\n                    tooltip: {\r\n                        trigger: 'item',\r\n                        formatter: \"{a} <br/>{b} : {c} ({d}%)\"\r\n                    },\r\n                    legend: {\r\n                        orient: 'vertical',\r\n                        left: 'right',\r\n                        data: ['试用商户', '付费商户', '意向商户']\r\n                    },\r\n                    series: [\r\n                        {\r\n                            name: '商户人数',\r\n                            type: 'pie',\r\n                            radius: '55%',\r\n                            center: ['40%', '60%'],\r\n                            data: [\r\n                                {value: 12, name: '试用商户'},\r\n                                {value: 8, name: '付费商户'},\r\n                                {value: 60, name: '意向商户'}\r\n                            ],\r\n                            itemStyle: {\r\n                                emphasis: {\r\n                                    shadowBlur: 10,\r\n                                    shadowOffsetX: 0,\r\n                                    shadowColor: 'rgba(0, 0, 0, 0.5)'\r\n                                }\r\n                            }\r\n                        }\r\n                    ]\r\n                };\r\n                /*//查询加载昨日关注与累计关注用户数：\r\n                yesterdayChart.showLoading();\r\n                allUsersChart.showLoading();\r\n                $.get(hi.ctx + '/reportForms/queryAttentioners').done(function (data) {\r\n                    //关闭动画\r\n                    yesterdayChart.hideLoading();\r\n                    allUsersChart.hideLoading();\r\n                    var yesterday = data.yesterday;\r\n                    var all = data.all;\r\n                    $(\"#yesterdayNum\").html(yesterday.num1 + yesterday.num2 + yesterday.num0);\r\n                    $(\"#allNum\").html(all.num1 + all.num2 + all.num0);\r\n                    // 填入数据\r\n                    yesterdayChart.setOption({\r\n                        series: [{\r\n                            // 根据名字对应到相应的系列\r\n                            data: [\r\n                                {value: yesterday.num2, name: '瑜伽经营者'},\r\n                                {value: yesterday.num1, name: '瑜伽其他人员'},\r\n                                {value: yesterday.num0, name: '其他用户'}\r\n                            ]\r\n                        }]\r\n                    });\r\n                    allUsersChart.setOption({\r\n                        series: [{\r\n                            // 根据名字对应到相应的系列\r\n                            data: [\r\n                                {value: all.num2, name: '瑜伽经营者'},\r\n                                {value: all.num1, name: '瑜伽其他人员'},\r\n                                {value: all.num0, name: '其他用户'}\r\n                            ]\r\n                        }]\r\n                    });\r\n                });*/\r\n                allMerchantsChart.setOption(option);\r\n                newMerchantsChart.setOption(option);\r\n            }\r\n        });\r\n\r\n        /****************NavView*******************/\r\n        var NavView = Marionette.ItemView.extend({\r\n            template: \"merchantStat-nav\",\r\n            initialize: function () {\r\n\r\n            },\r\n            reRender: function () {\r\n\r\n            },\r\n            events: {\r\n                \"click .state\": \"changeState\"\r\n            },\r\n            changeState: function (event) {\r\n                var target = event.target;\r\n                if (!$(target).hasClass(\"selected\")) {\r\n                    $($(\".state\")).each(function () {\r\n                        $(this).removeClass(\"navigator-active\");\r\n                    });\r\n                    $(target).addClass(\"navigator-active\");\r\n                }\r\n                this.reRender();\r\n            }\r\n        });\r\n        /****************TableView*******************/\r\n        var TableView = Marionette.ItemView.extend({\r\n            template: \"merchantStat-table-list\",\r\n            initialize: function () {\r\n                this.listenTo(this.collection, \"change\", this.reRender);\r\n            },\r\n            reRender: function () {\r\n                this.render();\r\n            },\r\n            onShow: function () {\r\n                var lineChart = echarts.init(document.getElementById('users-line-echarts'));\r\n                lineChart.showLoading();\r\n            }\r\n        });\r\n        var StatsLayout = Marionette.LayoutView.extend({\r\n            tagName: 'div',\r\n            id: 'merchant-stat-content',\r\n            template: \"merchantStat-list\",\r\n            regions: {\r\n                header: \"#merchantStat-top\",\r\n                body: \"#merchantStat-nav\",\r\n                footer: \"#merchantStat-content\"\r\n            },\r\n            onShow: function () {\r\n                var pieView = new PieView();\r\n                var navView = new NavView();\r\n                var tableView = new TableView();\r\n                this.showChildView('header', pieView);\r\n                this.showChildView('body',navView );\r\n                this.showChildView('footer',tableView );\r\n            }\r\n        });\r\n        return StatsLayout;\r\n\r\n\r\n    });\r\n"],"sourceRoot":"/source/"}